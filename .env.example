# ========================================
# EnglishPod 365 — Environment Template
# Copy this file to `.env` and adjust values
# ========================================

# ---------- App Ports ----------
# NestJS API port (default 4000)
PORT=4000
# Next.js 前端访问 API 的地址；开发模式保持本地地址即可
NEXT_PUBLIC_API_BASE=http://localhost:4000

# ---------- Data & Storage ----------
# 项目数据根目录（课程导入、音频缓存、TTS 缓存等）
DATA_DIR=./data
# Prisma/Postgres 连接串：请替换用户名、密码、库名
DATABASE_URL=postgresql://ep365:devpass@localhost:5432/englishpod

# S3 / MinIO 可选配置（用于托管课程音频或上传文件）
#S3_ENDPOINT=https://s3.example.com
#S3_REGION=us-east-1
#S3_BUCKET=englishpod
#S3_ACCESS_KEY=YOUR_KEY
#S3_SECRET_KEY=YOUR_SECRET
#S3_FORCE_PATH_STYLE=true

# ---------- Auth / Session ----------
# Cookie 名称（默认 sid）
#SESSION_COOKIE_NAME=sid
# 会话/CSRF 密钥（生产必填，强随机字符串）
SESSION_SECRET=change-me-strong-random-secret
# 会话 Cookie 有效期（天，默认 7）
#SESSION_DAYS=7
# HTTPS 环境建议开启（或在 NODE_ENV=production 下默认开启）
#COOKIE_SECURE=true
# 反向代理场景（Nginx/Traefik/Cloudflare 等）建议开启，用于正确获取 req.ip
#TRUST_PROXY=1
# 允许的 Web Origin 列表（逗号分隔）；生产务必配置为你的前端域名
#CORS_ORIGINS=https://your-domain.com
# 生产建议关闭 localhost 通配放行
#CORS_ALLOW_LOCALHOST_WILDCARD=false
# 登录失败窗口（毫秒）和阈值，超过后要求验证码
#AUTH_LOGIN_WINDOW_MS=600000
#AUTH_LOGIN_MAX_FAILURES=5
# 验证码有效期与长度
#AUTH_CAPTCHA_TTL_MS=120000
#AUTH_CAPTCHA_LENGTH=5
# 登录/注册速率限制（每 IP / 分钟）
#AUTH_RATE_LIMIT_LOGIN_MAX=30
#AUTH_RATE_LIMIT_SIGNUP_MAX=10
# PBKDF2 迭代次数（默认 >= 100000，可根据性能调大）
#AUTH_PBKDF2_ITERATIONS=200000

# ---------- Optional Services ----------
# DeepSeek / OpenAI API Key（用于自动生成完形/作文/点评）
#DEEPSEEK_API_KEY=your_key
#OPENAI_API_KEY=your_key
#EP365_PRACTICE_MODEL=deepseek-chat

# 对象存储直传或媒体链接前缀
#PUBLIC_CDN_BASE=https://cdn.example.com

# ---------- Upload / Cache ----------
# 单次上传文件大小上限（字节，默认 10MB）
#UPLOAD_MAX_BYTES=10485760
# 管理端 ZIP 导入大小上限（字节，默认 25MB）
#ADMIN_IMPORT_MAX_BYTES=26214400

# ---------- Request Limits ----------
# JSON 请求体上限（默认 1mb）
#JSON_BODY_LIMIT=1mb
# URL-encoded 请求体上限（默认 1mb）
#URLENCODED_BODY_LIMIT=1mb

# ---------- Logging / Debug ----------
#NODE_ENV=development
#LOG_LEVEL=info

NODE_ENV=production